api-version: reviewpad.com/v3.x

workflows:
  - name: rebase
    always-run: true
    if:
      - rule: '!$isUpdatedWithBaseBranch() && $toBool($selectFromContext("rebaseable"))'
        extra-actions:
          - $rebase()
          
  - name: have-all-checks-run-completed-readme
    always-run: true
    if:
      - rule: $haveAllChecksRunCompleted([], "success", ["skipped"]) && $hasFilePattern("README.md")
        extra-actions:
          - $comment("all check runs have completed successfully")
          
  - name: have-all-checks-run-completed-test
    always-run: true
    if:
      - rule: $haveAllChecksRunCompleted([], "success", ["skipped"]) && $hasFilePattern("test")
        extra-actions:
          - $comment("all check runs have completed successfully")

api-version: reviewpad.com/v3.x

workflows:
  - name: rebase
    always-run: true
    if:
      - rule: '!$isUpdatedWithBaseBranch() && $toBool($selectFromContext("rebaseable"))'
        extra-actions:
          - $rebase()
          
  - name: have-all-checks-run-completed-readme
    always-run: true
    if:
      - rule: $hasFilePattern("README.md") && $haveAllChecksRunCompleted([], "success", ["skipped"])
        extra-actions:
          - $addLabel("success")
          
  - name: have-all-checks-run-completed-test
    always-run: true
    if:
      - rule: $hasFilePattern("test") && $haveAllChecksRunCompleted([], "success", [])
        extra-actions:
          - $addLabel("success-2")
